<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Kalashnikov DBBBB: sql/trigger.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Kalashnikov DBBBB
   &#160;<span id="projectnumber">2.2.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5bd71961b401a432086d0fb290a87f3f.html">sql</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">trigger.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="trigger_8h_source.html">trigger.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for trigger.c:</div>
<div class="dyncontent">
<div class="center"><img src="trigger_8c__incl.png" border="0" usemap="#sql_2trigger_8c" alt=""/></div>
<!-- MAP 0 -->
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a38811626ecbd7e6bb1cc8820ead9199f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a38811626ecbd7e6bb1cc8820ead9199f">AK_trigger_save_conditions</a> (int trigger, struct list_node *condition)</td></tr>
<tr class="memdesc:a38811626ecbd7e6bb1cc8820ead9199f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves conditions for a trigger.  <a href="#a38811626ecbd7e6bb1cc8820ead9199f">More...</a><br /></td></tr>
<tr class="separator:a38811626ecbd7e6bb1cc8820ead9199f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7b601863091d0708653c8f817b3cf8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#aab7b601863091d0708653c8f817b3cf8">AK_trigger_add</a> (char *name, char *event, struct list_node *condition, char *table, char *function)</td></tr>
<tr class="memdesc:aab7b601863091d0708653c8f817b3cf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that adds a trigger to system table.  <a href="#aab7b601863091d0708653c8f817b3cf8">More...</a><br /></td></tr>
<tr class="separator:aab7b601863091d0708653c8f817b3cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f3375c2693be93bd370895bea42b0a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a49f3375c2693be93bd370895bea42b0a">AK_trigger_get_id</a> (char *name, char *table)</td></tr>
<tr class="memdesc:a49f3375c2693be93bd370895bea42b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that gets obj_id of a trigger defined by name and table.  <a href="#a49f3375c2693be93bd370895bea42b0a">More...</a><br /></td></tr>
<tr class="separator:a49f3375c2693be93bd370895bea42b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a256bc5cfe1886dba1310fc849668a635"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a256bc5cfe1886dba1310fc849668a635">AK_trigger_remove_by_name</a> (char *name, char *table)</td></tr>
<tr class="memdesc:a256bc5cfe1886dba1310fc849668a635"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function that removes a trigger from system table by name.  <a href="#a256bc5cfe1886dba1310fc849668a635">More...</a><br /></td></tr>
<tr class="separator:a256bc5cfe1886dba1310fc849668a635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5580f5dfc669b80c2c5f2f482d784494"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a5580f5dfc669b80c2c5f2f482d784494">AK_trigger_remove_by_obj_id</a> (int obj_id)</td></tr>
<tr class="memdesc:a5580f5dfc669b80c2c5f2f482d784494"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function removes a trigger by its obj_id.  <a href="#a5580f5dfc669b80c2c5f2f482d784494">More...</a><br /></td></tr>
<tr class="separator:a5580f5dfc669b80c2c5f2f482d784494"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5218f2c11756674db7080b6ba62ebe4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#aa5218f2c11756674db7080b6ba62ebe4">AK_trigger_edit</a> (char *name, char *event, struct list_node *condition, char *table, char *function)</td></tr>
<tr class="memdesc:aa5218f2c11756674db7080b6ba62ebe4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function edits information about the trigger in system table. In order to identify the trigger, either obj_id or table and name parameters should be defined. The other options should be set to NULL. Values of parameters that aren't changing can be left NULL. If conditions are to be removed, condition parameter should hold an empty list.  <a href="#aa5218f2c11756674db7080b6ba62ebe4">More...</a><br /></td></tr>
<tr class="separator:aa5218f2c11756674db7080b6ba62ebe4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b6b1d8b82240230cca2a8d570d2f03e"><td class="memItemLeft" align="right" valign="top">struct list_node *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a1b6b1d8b82240230cca2a8d570d2f03e">AK_trigger_get_conditions</a> (int trigger)</td></tr>
<tr class="memdesc:a1b6b1d8b82240230cca2a8d570d2f03e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function gets postfix list of conditions for the trigger (compatible with selection)  <a href="#a1b6b1d8b82240230cca2a8d570d2f03e">More...</a><br /></td></tr>
<tr class="separator:a1b6b1d8b82240230cca2a8d570d2f03e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54b8df0db010c361c9d110521f896c81"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a54b8df0db010c361c9d110521f896c81">AK_trigger_rename</a> (char *old_name, char *new_name, char *table)</td></tr>
<tr class="memdesc:a54b8df0db010c361c9d110521f896c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function renames the trigger.  <a href="#a54b8df0db010c361c9d110521f896c81">More...</a><br /></td></tr>
<tr class="separator:a54b8df0db010c361c9d110521f896c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25769445eb63fbe7d8aaee161b463a9a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trigger_8c.html#a25769445eb63fbe7d8aaee161b463a9a">AK_trigger_test</a> ()</td></tr>
<tr class="memdesc:a25769445eb63fbe7d8aaee161b463a9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function for trigger testing.  <a href="#a25769445eb63fbe7d8aaee161b463a9a">More...</a><br /></td></tr>
<tr class="separator:a25769445eb63fbe7d8aaee161b463a9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Provides functions for triggers </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aab7b601863091d0708653c8f817b3cf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_add </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_node *&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that adds a trigger to system table. </p>
<dl class="section author"><dt>Author</dt><dd>Unknown </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*name</td><td>name of the trigger </td></tr>
    <tr><td class="paramname">*event</td><td>event that calls the trigger - this should perhaps be an integer with defined constants... </td></tr>
    <tr><td class="paramname">*condition</td><td>AK_list list of conditions in postfix </td></tr>
    <tr><td class="paramname">*table</td><td>name of the table trigger is hooked on </td></tr>
    <tr><td class="paramname">*function</td><td>function that is being called by the trigger </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>trigger id or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="aa5218f2c11756674db7080b6ba62ebe4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_edit </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_node *&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function edits information about the trigger in system table. In order to identify the trigger, either obj_id or table and name parameters should be defined. The other options should be set to NULL. Values of parameters that aren't changing can be left NULL. If conditions are to be removed, condition parameter should hold an empty list. </p>
<dl class="section author"><dt>Author</dt><dd>Unknown </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*name</td><td>name of the trigger (or NULL if using obj_id) </td></tr>
    <tr><td class="paramname">*event</td><td>event of the trigger (or NULL if it isn't changing) </td></tr>
    <tr><td class="paramname">*condition</td><td>list of conditions for trigger (or NULL if it isn't changing; empty list if all conditions are to be removed) </td></tr>
    <tr><td class="paramname">*table</td><td>name of the connected table (or NULL id using obj_id) </td></tr>
    <tr><td class="paramname">*function</td><td>name of the connected function (or NULL if it isn't changing) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EXIT_SUCCESS or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="a1b6b1d8b82240230cca2a8d570d2f03e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct list_node* AK_trigger_get_conditions </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trigger</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function gets postfix list of conditions for the trigger (compatible with selection) </p>
<dl class="section author"><dt>Author</dt><dd>Unknown, updated by Mario Peroković </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trigger</td><td>obj_id of the trigger </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>list of conditions for the trigger </dd></dl>

</div>
</div>
<a class="anchor" id="a49f3375c2693be93bd370895bea42b0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_get_id </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that gets obj_id of a trigger defined by name and table. </p>
<dl class="section author"><dt>Author</dt><dd></dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*name</td><td>name of the trigger </td></tr>
    <tr><td class="paramname">*table</td><td>name of the table on which the trigger is hooked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>obj_id of the trigger or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="a256bc5cfe1886dba1310fc849668a635"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_remove_by_name </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function that removes a trigger from system table by name. </p>
<dl class="section author"><dt>Author</dt><dd>Unknown </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">*name</td><td>name of the trigger </td></tr>
    <tr><td class="paramname">*table</td><td>name of the table </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EXIT_SUCCESS or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="a5580f5dfc669b80c2c5f2f482d784494"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_remove_by_obj_id </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>obj_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function removes a trigger by its obj_id. </p>
<dl class="section author"><dt>Author</dt><dd>Unknown </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj_id</td><td>obj_id of the trigger </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EXIT_SUCCESS or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="a54b8df0db010c361c9d110521f896c81"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_rename </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>old_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>new_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function renames the trigger. </p>
<dl class="section author"><dt>Author</dt><dd>Ljubo Barać </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_name</td><td>Name of the trigger to be renamed </td></tr>
    <tr><td class="paramname">new_name</td><td>New name of the trigger </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EXIT_SUCCESS or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="a38811626ecbd7e6bb1cc8820ead9199f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int AK_trigger_save_conditions </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>trigger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct list_node *&#160;</td>
          <td class="paramname"><em>condition</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Saves conditions for a trigger. </p>
<dl class="section author"><dt>Author</dt><dd>Unknown, updated by Mario Peroković, check if data is TYPE_INT </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">trigger</td><td>obj_id of the trigger in question </td></tr>
    <tr><td class="paramname">*condition</td><td>AK_list list of conditions </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EXIT_SUCCESS or EXIT_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="a25769445eb63fbe7d8aaee161b463a9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void AK_trigger_test </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function for trigger testing. </p>
<dl class="section author"><dt>Author</dt><dd>Unknown </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
